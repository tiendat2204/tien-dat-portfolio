{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dynamic-color-extraction",
  "type": "registry:component",
  "files": [
    {
      "path": "src/registry/DynamicColorExtraction/ProductCardClient.tsx",
      "content": "'use client'\r\nimport type { ReactNode } from 'react'\r\nimport { useState, useEffect } from 'react'\r\nimport { motion } from 'framer-motion'\r\n\r\ninterface IBook {\r\n  id: string\r\n  coverImage: string\r\n  title: string\r\n  author: string\r\n}\r\n\r\ninterface ProductCardClientProps {\r\n  data: IBook\r\n  children: ReactNode\r\n}\r\n\r\nconst extractDominantColor = (img: HTMLImageElement): string => {\r\n  try {\r\n    const canvas = document.createElement('canvas')\r\n    const ctx = canvas.getContext('2d', { willReadFrequently: true })\r\n\r\n    if (!ctx) return 'transparent'\r\n\r\n    canvas.width = 50\r\n    canvas.height = 50\r\n    ctx.drawImage(img, 0, 0, 50, 50)\r\n\r\n    const imageData = ctx.getImageData(0, 0, 50, 50)\r\n    const data = imageData.data\r\n\r\n    let r = 0\r\n    let g = 0\r\n    let b = 0\r\n    const pixelCount = data.length / 4\r\n\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      r += data[i]\r\n      g += data[i + 1]\r\n      b += data[i + 2]\r\n    }\r\n\r\n    r = Math.floor(r / pixelCount)\r\n    g = Math.floor(g / pixelCount)\r\n    b = Math.floor(b / pixelCount)\r\n\r\n    return `rgba(${r}, ${g}, ${b}, 0.3)`\r\n  } catch (error) {\r\n    console.error('Error extracting color:', error)\r\n    return 'transparent'\r\n  }\r\n}\r\n\r\nexport const ProductCardClient = ({ data, children }: ProductCardClientProps) => {\r\n  const [bgColor, setBgColor] = useState<string>('transparent')\r\n  const [isHovered, setIsHovered] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const img = new window.Image()\r\n\r\n    img.crossOrigin = 'anonymous'\r\n    img.src = data.coverImage || '/book.png'\r\n\r\n    img.onload = () => {\r\n      const color = extractDominantColor(img)\r\n      setBgColor(color)\r\n    }\r\n  }, [data.coverImage])\r\n\r\n  return (\r\n    <motion.div\r\n      className='w-full max-w-xs  group cursor-pointer relative'\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n    >\r\n      <motion.div\r\n        className='absolute inset-0 pointer-events-none rounded-lg'\r\n        initial={{ opacity: 0, scale: 1 }}\r\n        animate={{\r\n          opacity: isHovered ? 1 : 0,\r\n          scale: isHovered ? 1.1 : 1\r\n        }}\r\n        transition={{ duration: 0.3, ease: 'easeOut' }}\r\n        style={{ backgroundColor: bgColor }}\r\n      />\r\n\r\n      <div className='relative z-10'>{children}</div>\r\n    </motion.div>\r\n  )\r\n}\r\n",
      "type": "registry:component"
    }
  ]
}